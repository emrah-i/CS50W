{% extends 'network/layout.html' %}

{% block body %}
    <div id="post_page_{{ post.post }}" class="post_page">
        <table>
            <tr>
                <td>
                    <h3 id="user_page_route" data-username="{{ post.username }}">{{ post.username }}</h3>
                </td>
            </tr>
            <tr>
                <td>
                    {{ post.title }}
                </td>
            </tr>
            <tr>
                <td>
                    {{ post.text }}
                </td>
            </tr>
            <tr>
                <td>
                    {{ post.upload_time }}
                </td>
            </tr>
            <tr>
                <td>
                    {% if user.is_authenticated %}
                        {% if post.likes != None %}
                        <button id="like_button" data-postid="{{ post.id }}"><i class="fa fa-solid fa-heart" style="color: #ff0000;"></i>&nbsp <span id="like_count">{{ post.likes }}</span></button>
                        {% else %}
                        <button id="like_button" data-postid="{{ post.id }}"><i class="fa fa-solid fa-heart" style="color: #ff0000;"></i>&nbsp <span id="like_count">0</span></button>
                        {% endif %}
                        {% if user.id == post.user %}
                        <button id="edit_button" data-id="{{ post.id }}">Edit</button>
                        {% endif %}
                    {% else %}
                        <p>{{ post.likes }} Likes</p>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td>
                    {% if user.is_authenticated %}
                    <form action="/post/{{ post.id }}" method="post">
                        {% csrf_token %}
                        <input disabled value="{{ user.username }}" id="user_input">
                        <textarea id="comment_text" name="comment_text" placeholder="Enter Comment" required maxlength="250"></textarea><br>
                        <button type="submit">Post</button>
                    </form>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td>
                    {% if comments == 0 %}
                    <p>No Comments</p>
                    {% else %}
                    {% for comment in comments %}
                    <div id="comment{{ comment.id }}" class="post_comments">
                        <p id="user_page_route" data-username="{{ comment.user__username }}">{{ comment.user__username }}</p>
                        <hr>
                        <p>{{ comment.text }}</p>
                        <p>{{ comment.upload_time }}</p>
                    </div>
                    {% endfor %}
                    {% endif %}
                </td>
            </tr>
        </table>
    </div>
{% endblock %}